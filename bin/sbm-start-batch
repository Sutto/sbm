#!/usr/bin/env ruby
require_relative './coordination'

def usage
  STDERR.puts "Usage: #$0 batch-name"
  exit 1
end

coordinator, worker = Coordination.defaults
batch_name          = ARGV[0] || usage
batch               = Coordination::Batch.new(batch_name)

coordinator.start batch, worker
